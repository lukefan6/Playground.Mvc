@{
    ViewBag.Title = "Share";
}

@section Scripts{
    <script>
        window.fbAsyncInit = function () {
            FB.init({
                appId: '462047010625534',
                xfbml: true,
                version: 'v2.3'
            });
        };

        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));

        $('#image').change(function () {
            $('#imagePlaceholder').attr('src', $(this).val());
        });

        function postToFeed(title, desc, url, image) {
            var obj = { method: 'feed', link: url, picture: image, name: title, description: desc };
            function callback(response) { }
            FB.ui(obj, callback);
        }

        var fbShareBtn = document.querySelector('.fb_share');
        fbShareBtn.addEventListener('click', function (e) {
            e.preventDefault();
            var title = $('#title').val(),
                desc = $('#desc').val(),
                url = $('#url').val(),
                image = $('#image').val();
            postToFeed(title, desc, url, image);

            return false;
        });
    </script>
}

<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

<div id="login-overlay" class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title" id="myModalLabel">Facebook Share</h4>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-xs-12">
                    <div class="well">
                        <div class="form-group">
                            <label for="title" class="control-label">Title</label>
                            <input type="text" class="form-control" id="title" name="title" />
                        </div>
                        <div class="form-group">
                            <label for="desc" class="control-label">Desctiption</label>
                            <input type="text" class="form-control" id="desc" name="desc" />
                        </div>
                        <div class="form-group">
                            <label for="url" class="control-label">URL</label>
                            <input type="text" class="form-control" id="url" name="url" />
                        </div>
                        <div class="form-group">
                            <label for="image" class="control-label">Image</label>
                            <input type="text" class="form-control" id="image" name="image" />
                            <img class="img-responsive" id="imagePlaceholder"/>
                        </div>
                        <button class="btn btn-success btn-block fb_share">Share</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>